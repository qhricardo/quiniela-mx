<h2>Editar Sobrenombre de Usuario</h2>
<form id="form-sobrenombre">
  <label>Email del usuario:</label><br>
  <input type="email" id="email-buscar" required><br><br>

  <label>Nuevo sobrenombre:</label><br>
  <input type="text" id="nuevo-sobrenombre" required><br><br>

  <button type="submit">Actualizar Sobrenombre</button>
  <p id="mensaje-sobrenombre"></p>
</form>

<!-- Firebase SDK (asegúrate de que estos estén ya incluidos en tu página) -->
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
<script src="js/firebase-config.js"></script>

<script>
  const db = firebase.firestore();

  document.getElementById("form-sobrenombre").addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("email-buscar").value.trim();
    const nuevoSobrenombre = document.getElementById("nuevo-sobrenombre").value.trim();
    const mensaje = document.getElementById("mensaje-sobrenombre");

    try {
      const querySnapshot = await db.collection("users").where("email", "==", email).limit(1).get();
      
      if (querySnapshot.empty) {
        mensaje.textContent = "Usuario no encontrado.";
        mensaje.style.color = "red";
        return;
      }

      const docRef = querySnapshot.docs[0].ref;
      await docRef.update({ sobrenombre: nuevoSobrenombre });

      mensaje.textContent = "Sobrenombre actualizado correctamente.";
      mensaje.style.color = "green";
    } catch (error) {
      console.error("Error al actualizar sobrenombre:", error);
      mensaje.textContent = "Error al actualizar sobrenombre.";
      mensaje.style.color = "red";
    }
  });
</script>

